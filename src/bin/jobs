#!/usr/bin/env php
<?php
declare(strict_types=1);

if (PHP_SAPI !== 'cli') {
    echo 'bin/jobs must be run as a CLI application';
    exit(1);
}

try{
    require __DIR__ . '/../../vendor/autoload.php';
}catch(\Exception $exception){
    echo 'Autoload error: ' . $exception->getMessage();
    exit(1);
}
$serviceContainer = new \NHDS\Jobs\Service\Container();
$ymlServiceFilePath = __DIR__ . '/../config/root.yml';
$serviceContainer->addServicesYmlFilePath($ymlServiceFilePath);
if (isset($argv[2]) && is_string($argv[2]) && is_file($argv[2])) {
    $serviceContainer->addServicesYmlFilePath($argv[2]);
}
$consoleApplication = $serviceContainer->getContainerBuilder()->get('symfony.component.console.application');

$consoleApplication->run();