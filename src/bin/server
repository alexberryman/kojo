#!/usr/bin/env php
<?php
declare(strict_types=1);

if (PHP_SAPI !== 'cli') {
    echo 'bin/server must be run as a CLI application';
    exit(1);
}
try{
    require __DIR__ . '/../../vendor/autoload.php';
}catch(\Exception $e){
    echo 'Autoload error: ' . $e->getMessage();
    exit(1);
}
$serviceContainer = new \NHDS\Jobs\Service\Container();
$yamlServiceFilePath = __DIR__ . '/../config/root.yml';
$serviceContainer->setServicesYamlFilePath($yamlServiceFilePath);
$server = $serviceContainer->getContainerBuilder()->get('nhds.jobs.process.pool.server');

$server->start();